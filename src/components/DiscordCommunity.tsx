
import React, { useState, useEffect } from "react";

interface DiscordSettingsProps {
  discordLink: string;
  communityName: string;
  onlineText: string;
  guidelinesText?: string;
  buttonText: string;
}

const DiscordCommunity: React.FC = () => {
  const [settings, setSettings] = useState<DiscordSettingsProps>({
    discordLink: "https://discord.gg/example",
    communityName: "Discord",
    onlineText: "42 Heroes Online",
    guidelinesText: "By joining, you agree to the server guidelines",
    buttonText: "Join Now!",
  });
  
  useEffect(() => {
    // Load discord settings from localStorage
    const loadSettings = () => {
      const storedSettings = localStorage.getItem("discordSettings");
      if (storedSettings) {
        setSettings(JSON.parse(storedSettings));
      }
    };
    
    // Load settings initially
    loadSettings();
    
    // Set up event listener for settings changes
    const handleSettingsChange = (event: CustomEvent) => {
      setSettings(event.detail);
    };
    
    window.addEventListener("discordSettingsChanged", handleSettingsChange as EventListener);
    
    // Clean up event listener
    return () => {
      window.removeEventListener("discordSettingsChanged", handleSettingsChange as EventListener);
    };
  }, []);
  
  return (
    <div className="w-full max-w-md mx-auto bg-[#1a2039] p-4 rounded-lg shadow-lg overflow-hidden">
      <div className="flex items-center gap-2 mb-2 text-white">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19.2701 5.41C17.9201 4.8 16.5001 4.35 15.0001 4.08C14.9819 4.07632 14.9632 4.0759 14.9451 4.07876C14.927 4.08163 14.9099 4.08771 14.8951 4.09C14.7401 4.36 14.5601 4.71 14.4401 4.99C12.8401 4.74 11.2101 4.74 9.64005 4.99C9.52005 4.71 9.34005 4.36 9.18005 4.09C9.16505 4.08772 9.14797 4.08166 9.12988 4.07879C9.11178 4.07593 9.0931 4.07634 9.07505 4.08C7.58005 4.35 6.16005 4.8 4.80005 5.41C4.78438 5.41747 4.77155 5.42977 4.76357 5.4453C1.71005 9.9 0.870054 14.23 1.27005 18.5C1.27117 18.5194 1.2751 18.5384 1.28161 18.5559C1.28813 18.5735 1.29712 18.5893 1.30805 18.603C3.00005 19.87 4.60505 20.64 6.18005 21.13C6.19656 21.1353 6.21391 21.1353 6.23042 21.13C6.24693 21.1248 6.26194 21.1145 6.27355 21.1C6.72005 20.5 7.11005 19.85 7.44005 19.18C7.45357 19.1528 7.45635 19.1218 7.44805 19.0929C7.43975 19.064 7.42092 19.0391 7.39505 19.02C6.82005 18.8 6.27005 18.53 5.74005 18.23C5.71285 18.2137 5.69235 18.1882 5.6817 18.1574C5.67104 18.1267 5.67087 18.0927 5.68005 18.06C5.68963 18.0282 5.7091 18.0012 5.73505 17.983C5.85005 17.9 5.96505 17.82 6.07005 17.73C6.09629 17.7106 6.1287 17.7012 6.16127 17.7033C6.19384 17.7054 6.22504 17.7188 6.24905 17.742C10.2001 19.54 14.4601 19.54 18.3601 17.742C18.3843 17.7186 18.4156 17.7051 18.4485 17.7029C18.4813 17.7007 18.514 17.7102 18.5401 17.73C18.6501 17.82 18.7601 17.9 18.8701 17.983C18.8962 18.0011 18.9158 18.0281 18.9255 18.06C18.9351 18.0919 18.9348 18.1261 18.9241 18.157C18.9134 18.1879 18.8929 18.2136 18.8651 18.23C18.3401 18.54 17.7801 18.8 17.2101 19.013C17.1842 19.0219 17.1616 19.0368 17.1441 19.0564C17.1265 19.076 17.1145 19.0995 17.1091 19.125C17.1038 19.1505 17.1054 19.1769 17.1138 19.2015C17.1222 19.2261 17.1371 19.2483 17.1571 19.266C17.5001 19.95 17.9001 20.59 18.3301 21.1C18.3414 21.1144 18.356 21.1249 18.3724 21.1301C18.3887 21.1352 18.4061 21.1349 18.4221 21.13C20.0001 20.64 21.6001 19.87 23.3001 18.603C23.3112 18.5893 23.3204 18.5736 23.3271 18.5561C23.3337 18.5385 23.3378 18.5195 23.3401 18.5C23.8201 13.54 22.4701 9.25 19.8701 5.45C19.8641 5.43462 19.8532 5.42184 19.8391 5.414L19.2701 5.41ZM8.02005 15.62C6.90005 15.62 5.97005 14.6 5.97005 13.36C5.97005 12.12 6.87005 11.1 8.02005 11.1C9.18005 11.1 10.0701 12.13 10.0501 13.36C10.0501 14.6 9.17005 15.62 8.02005 15.62ZM16.0101 15.62C14.8901 15.62 13.9601 14.6 13.9601 13.36C13.9601 12.12 14.8601 11.1 16.0101 11.1C17.1701 11.1 18.0601 12.13 18.0401 13.36C18.0401 14.6 17.1701 15.62 16.0101 15.62Z" fill="white"/>
        </svg>
        <span className="font-medium">{settings.communityName} Community Chat</span>
      </div>
      
      <div className="bg-[#f6d26b] text-black rounded-lg p-3 flex flex-col">
        <div className="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none" className="mr-2">
            <path d="M30.0002 6.66669C27.7868 5.55556 25.4168 4.72222 22.9168 4.30556C22.8895 4.30139 22.8618 4.30073 22.8344 4.30463C22.807 4.30853 22.7806 4.31693 22.7568 4.32919C22.5002 4.76669 22.2168 5.36669 22.0235 5.83336C19.4768 5.45836 16.8902 5.45836 14.4035 5.83336C14.2102 5.36669 13.9202 4.76669 13.6635 4.32919C13.6397 4.31693 13.6132 4.30853 13.5858 4.30463C13.5585 4.30073 13.5307 4.30139 13.5035 4.30556C11.0035 4.72222 8.63349 5.55556 6.41683 6.66669C6.39347 6.67853 6.37394 6.69628 6.36016 6.71853C1.28349 14.4752 -0.14984 22.0919 0.616828 29.6252C0.617874 29.6541 0.623828 29.6824 0.634579 29.709C0.645329 29.7356 0.66065 29.7602 0.680161 29.7819C3.33349 31.7835 5.91683 33.0669 8.45016 33.9002C8.47694 33.9088 8.50536 33.9088 8.53214 33.9002C8.55891 33.8914 8.58215 33.8744 8.59849 33.8502C9.30016 32.9002 9.92516 31.9002 10.4418 30.8502C10.4643 30.8069 10.4685 30.7568 10.4535 30.7098C10.4385 30.6629 10.4052 30.6221 10.3602 30.5935C9.40016 30.2252 8.48349 29.7752 7.60016 29.2752C7.55994 29.2498 7.53001 29.2098 7.51662 29.1623C7.50323 29.1148 7.50698 29.0637 7.52683 29.0185C7.61683 28.9002 7.70683 28.7769 7.79349 28.6552C7.81057 28.6344 7.8331 28.6184 7.85895 28.6089C7.88481 28.5993 7.91307 28.5967 7.94016 28.6019C13.2002 31.0002 18.8502 31.0002 24.0335 28.6019C24.0608 28.5961 24.0894 28.5984 24.1154 28.6078C24.1415 28.6172 24.1642 28.6335 24.1818 28.6552C24.2702 28.7769 24.3602 28.9002 24.4502 29.0185C24.4695 29.0639 24.4733 29.1148 24.4605 29.1624C24.4477 29.2099 24.4186 29.2506 24.3785 29.2769C23.4968 29.7835 22.5735 30.2252 21.6168 30.5919C21.5717 30.6214 21.5384 30.663 21.5235 30.7105C21.5087 30.758 21.5132 30.8086 21.5368 30.8519C22.0668 31.9002 22.6918 32.9002 23.3835 33.8485C23.399 33.8728 23.4221 33.8899 23.4488 33.8986C23.4756 33.9073 23.5043 33.9071 23.5302 33.8985C26.0702 33.0669 28.6535 31.7835 31.3068 29.7819C31.3268 29.7608 31.3427 29.7366 31.3536 29.7102C31.3645 29.6837 31.3703 29.6554 31.3702 29.6269C32.2702 20.9835 30.0868 13.4169 26.3168 6.72019C26.304 6.69691 26.285 6.67851 26.2602 6.66669H30.0002ZM10.5235 24.6919C8.97516 24.6919 7.70016 23.2835 7.70016 21.5502C7.70016 19.8169 8.95016 18.4085 10.5235 18.4085C12.1135 18.4085 13.3635 19.8285 13.3368 21.5502C13.3368 23.2835 12.0968 24.6919 10.5235 24.6919ZM25.4868 24.6919C23.9385 24.6919 22.6635 23.2835 22.6635 21.5502C22.6635 19.8169 23.9135 18.4085 25.4868 18.4085C27.0768 18.4085 28.3268 19.8285 28.3002 21.5502C28.3002 23.2835 27.0785 24.6919 25.4868 24.6919Z" fill="black"/>
          </svg>
          <div>
            <div className="font-bold text-lg">{settings.communityName}</div>
            <div className="text-sm opacity-80">{settings.onlineText}</div>
          </div>
        </div>
        
        <div className="flex items-center justify-between mt-3">
          <span className="text-xs opacity-70">{settings.guidelinesText}</span>
          <a 
            href={settings.discordLink}
            target="_blank"
            rel="noreferrer"
            className="bg-[#d9b762] hover:bg-[#c5a656] text-black px-4 py-2 rounded font-medium text-sm"
          >
            {settings.buttonText}
          </a>
        </div>
      </div>
    </div>
  );
};

export default DiscordCommunity;
